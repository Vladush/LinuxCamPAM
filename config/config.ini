; LinuxCamPAM Configuration Example
; Copy this file to /etc/linuxcampam/config.ini to customize behavior.
; All values are commented out with their defaults or typical values.

[General]
; Log level: debug, info, warning, error
; log_level = info

; Log file path (only used if NOT running under systemd)
; If running as a systemd service, logs go to journalctl.
; log_file = /var/log/linuxcampam.log

[Paths]
; Directory for storing user embeddings
users_dir = /etc/linuxcampam/users
; Directory containing model files (.onnx)
models_dir = /etc/linuxcampam/models
; Path to linux-enable-ir-emitter executable
ir_emitter_path = /usr/local/bin/linux-enable-ir-emitter

[Auth]
; Similarity threshold for face matching (0.0 to 1.0).
; Lower is stricter, higher is more lenient.
; 0.4 is a good starting point for SFace.
; threshold = 0.4

; Face detection confidence threshold (0.0 to 1.0).
; How confident the AI must be that it found a face.
; High values (0.9) are safe but fail in poor light/IR.
; Lower values (0.5-0.6) improve IR success but risk false detections.
detection_threshold = 0.9

; Timeout in milliseconds to wait for a successful match.
; timeout_ms = 3000

; Authentication Policy:
; - adaptive: Smart logic (e.g., IR required if available, optional RGB)
; - strict: ALL configured cameras must match.
; - lenient: ANY configured camera match is sufficient.
; policy = adaptive

; Maximum face embeddings per user (for multi-lighting support).
; 0 = unlimited. Default 5 prevents abuse while allowing variants.
; max_embeddings = 5

[Capture]
; Enhanced capture settings for enrollment quality.
; HDR uses multiple exposures if camera supports manual exposure control.
; enroll_hdr = auto        ; auto | on | off
; enroll_averaging = on    ; on | off
; enroll_average_frames = 5

; Verification capture (speed-focused, defaults to fast single-frame).
; verify_averaging = off
; verify_average_frames = 3

[Hardware]
; Hardware acceleration provider priority.
; Options: opencl, cpu.
; Default tries OpenCL first, then falls back to CPU.
; provider_priority = opencl,cpu

; Legacy / Simple Configuration
; Use these if you have a standard setup (IR + RGB or just one)
; and don't want to define custom camera sections.

; Path to the primary (usually IR) camera.
; camera_path_ir = /dev/video2

; Path to the secondary (usually RGB) camera.
; camera_path_rgb = /dev/video0

; Minimum brightness (0-255) for the RGB camera to be considered valid.
; checks for underexposed images.
; min_brightness = 40

[Performance]
; Seconds to keep the AI models loaded in memory after authentication.
; 0  = Unload immediately (saves RAM, slower next auth).
; >0 = Keep alive (faster repeated auths).
; model_keep_alive_sec = 0

[Models]
; Paths to the ONNX models.
; Defaults are relative to the install location or standard paths.
; face_detection = /usr/share/linuxcampam/models/face_detection_yunet_2022mar.onnx
; face_recognition = /usr/share/linuxcampam/models/face_recognition_sface_2021dec.onnx

[Storage]
; Save images of failed authentication/enrollment attempts for debugging.
save_fail_images = true
; Save images of successful authentications.
; save_success_images = false

; -----------------------------------------------------------------------------
; Advanced Camera Configuration (Optional)
; Use this section to manually define multiple cameras with specific roles.
; If [Cameras] names are defined, the [Hardware] camera_path_* settings are ignored.
; -----------------------------------------------------------------------------

; [Cameras]
; List of camera identifiers to configure below.
; names = cam_ir, cam_rgb

; [Camera.cam_ir]
; path = /dev/video2
; type = ir
; ; If true, failure on this camera fails the entire authentication immediately.
; mandatory = true
; min_brightness = 0
; ; Per-camera capture settings (override global [Capture] settings)
; enroll_hdr = off          ; IR cameras typically don't support HDR
; enroll_averaging = on     ; Use frame averaging for better IR quality
; enroll_average_frames = 7

; [Camera.cam_rgb]
; path = /dev/video0
; type = rgb
; mandatory = false
; ; Ensure RGB camera isn't too dark
; min_brightness = 40
; ; Per-camera capture settings (override global [Capture] settings)
; enroll_hdr = auto         ; Use HDR if camera supports it
; enroll_averaging = off    ; HDR is preferred for RGB
